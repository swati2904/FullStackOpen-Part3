(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t(18),r=t.n(a),u=(t(9),t(8)),o=t(19),s=t(3),i=t(5),d=t.n(i),l="/api/persons",j={getAll:function(){return d.a.get(l).then((function(e){return e.data}))},create:function(e){return d.a.post(l,e).then((function(e){return e.data}))},update:function(e,n){return d.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},delete:function(e,n){return d.a.delete("".concat(l,"/").concat(e),n).then((function(e){return e.data}))}},b=t(0),h=function(e){var n=e.text,t=e.handleClick;return Object(b.jsxs)("button",{onClick:t,children:[" ",n]})},m=function(e){var n=e.person,t=e.handleDelete,c=n.name,a=n.number;return Object(b.jsxs)("p",{children:[c," ",a,Object(b.jsx)(h,{text:"delete",handleClick:function(){return t(n)}})]})},f=function(e){var n=e.message;return n?Object(b.jsxs)("div",{className:"success",children:[Object(b.jsx)("div",{children:"Success:"}),n]}):null},O=function(e){var n=e.message;return n?Object(b.jsxs)("div",{className:"error",children:[Object(b.jsx)("div",{children:"Error:"}),n]}):null},x=function(e){var n=e.persons,t=e.handleDelete;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Numbers"}),n.map((function(e){return Object(b.jsx)(m,{person:e,handleDelete:t},e.name)}))]})},p=function(e){var n=e.searchValue,t=e.handleSearchValue;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsxs)("div",{children:["Filter shown up with:",Object(b.jsx)("input",{value:n,onChange:t})]})]})},v=function(e){var n=e.newName,t=e.number,c=e.handleAddName,a=e.handleAddNumber,r=e.handleSubmit;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{children:"add a new"}),Object(b.jsxs)("form",{onSubmit:r,children:[Object(b.jsxs)("div",{children:["name:",Object(b.jsx)("input",{value:n,onChange:c})]}),Object(b.jsxs)("div",{children:["number:",Object(b.jsx)("input",{value:t,onChange:a})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})]})},g=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),i=Object(s.a)(r,2),d=i[0],l=i[1],h=Object(c.useState)(""),m=Object(s.a)(h,2),g=m[0],w=m[1],S=Object(c.useState)(""),k=Object(s.a)(S,2),N=k[0],A=k[1],C=Object(c.useState)(""),y=Object(s.a)(C,2),D=y[0],F=y[1],V=Object(c.useState)(""),E=Object(s.a)(V,2),T=E[0],I=E[1];Object(c.useEffect)((function(){j.getAll().then((function(e){a(e)}))}),[]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f,{message:T}),Object(b.jsx)(O,{message:D}),Object(b.jsx)(p,{searchValue:N,handleSearchValue:function(e){A(e.target.value)}}),Object(b.jsx)(v,{newName:d,number:g,handleAddName:function(e){l(e.target.value)},handleAddNumber:function(e){w(e.target.value)},handleSubmit:function(e){e.preventDefault();var n=Object(o.a)(t);if(d&&g){var c=t.findIndex((function(e){return e.name===d}));-1===c?j.create({name:d,number:g}).then((function(e){n.push(e),a(n),l(""),w(""),I("".concat(d," Added Successfully")),setTimeout((function(){I("")}),3e3)})):window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))&&(console.log(c),j.update(t[c].id,{name:d,number:g}).then((function(e){n[c]=Object(u.a)(Object(u.a)({},n[c]),e),a(n),l(""),w(""),I("updated ".concat(d," number")),setTimeout((function(){I("")}),3e3)})))}else alert("name and number cannot be empty!!")}}),Object(b.jsx)(x,{persons:N?t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())})):t,handleDelete:function(e){var n=e.id,c=e.name;window.confirm("Are you sure, you want to delete ".concat(c,"?"))&&j.delete(n).then((function(){var e=t.filter((function(e){return e.id!==n}));a(e)})).catch((function(e){F("something went wrong"),setTimeout((function(){F("")}),3e3)}))}})]})};r.a.render(Object(b.jsx)(g,{}),document.getElementById("root"))},9:function(e,n,t){}},[[43,1,2]]]);
//# sourceMappingURL=main.b6fc1892.chunk.js.map